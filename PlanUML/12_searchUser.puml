@startuml SearchUser

actor Admin
boundary "UserListPage" as View #lightblue
participant ":userRoute" as Route #lightblue
control "userController" as Controller #lightblue
participant ":userService" as Service #lightblue
entity "userModel" as Model #lightblue
database "MongoDB" as MongoDB #yellow

group Search User
note right of Admin: Search by username or email
Admin -> View: 1. Enter keyword (e.g. "john")

activate View

View -> Route: 2. GET /api/users/search?keyword=john
activate Route

Route -> Controller: 3. searchUsers(req, res)
activate Controller

Controller -> Service: 4. searchUsers(keyword)
activate Service

note right of Service: Search by username or email

Service -> Model: 5. findUsers(keyword)
activate Model

Model -> MongoDB: 6. Execute query
activate MongoDB
MongoDB --> Model: 7. Return results
deactivate MongoDB

Model --> Service: 8. Return user list
deactivate Model

alt No users found
    Service --> Controller: 8.1. Return []
    Controller --> Route: 8.1.1. Return []
    Route --> View: 8.1.2. Show "No user found"
    View --> Admin: 8.1.3. Display empty result
else Users found
    Service --> Controller: 8.2. Return user list
    Controller --> Route: 8.2.1. Return user list
    Route --> View: 8.2.2. Render user list
    View --> Admin: 8.2.3. Display result
end

deactivate Service
deactivate Controller
deactivate Route
deactivate View
end
@enduml
